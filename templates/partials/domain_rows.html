{{define "domain_rows"}}
{{range .Domains}}
<tr class="hover:bg-slate-50 dark:hover:bg-slate-800/40 transition-colors">
    <td class="px-6 py-4">
        <div class="flex flex-col">
            <span class="font-mono text-sm text-primary font-medium">{{.Name}}</span>
            {{if or (gt .HighRisk 0) (gt .MediumRisk 0)}}
            <div class="flex gap-2 mt-1">
                {{if gt .HighRisk 0}}
                <span class="text-[9px] font-bold uppercase text-rose-500 bg-rose-500/10 px-1 rounded">High Risk: {{.HighRisk}}</span>
                {{end}}
                {{if gt .MediumRisk 0}}
                <span class="text-[9px] font-bold uppercase text-amber-500 bg-amber-500/10 px-1 rounded">Med Risk: {{.MediumRisk}}</span>
                {{end}}
            </div>
            {{end}}
        </div>
    </td>
    <td class="px-6 py-4">
        <div class="flex flex-wrap gap-1">
            {{range .Technologies}}
            <span class="inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold bg-slate-200 dark:bg-slate-700">
                {{if .Icon}}
                <img src="https://www.wappalyzer.com/images/icons/{{.Icon}}" alt="{{.Name}}" class="w-3 h-3 object-contain">
                {{end}}
                {{.Name}}
            </span>
            {{end}}
        </div>
    </td>
    <td class="px-6 py-4 text-sm text-slate-500">
        {{range $i, $cat := .Categories}}{{if $i}}, {{end}}{{$cat}}{{end}}
    </td>
    <td class="px-6 py-4">
        <span class="px-2 py-1 rounded-full text-[10px] font-black uppercase tracking-wide 
            {{if ge .Confidence 90}}bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400
            {{else if ge .Confidence 60}}bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400
            {{else}}bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400{{end}}">
            {{if ge .Confidence 90}}High{{else if ge .Confidence 60}}Medium{{else}}Low{{end}}
        </span>
    </td>
    <td class="px-6 py-4 text-sm text-slate-500">{{.LastSeen}}</td>
    <td class="px-6 py-4 text-right">
        <div class="flex justify-end gap-2">
            {{template "bookmark_button" .}}
            <button 
                hx-get="/notes/new?domain_id={{.ID}}" 
                hx-target="body" 
                hx-swap="beforeend"
                class="text-slate-400 hover:text-primary transition-colors">
                <span class="material-symbols-outlined text-lg">description</span>
            </button>
            <button class="text-slate-400 hover:text-slate-100">
                <span class="material-symbols-outlined text-lg">open_in_new</span>
            </button>
        </div>
    </td>
</tr>
{{else}}
<tr>
    <td colspan="6" class="px-6 py-8 text-center text-slate-500 italic">No domains match your filters.</td>
</tr>
{{end}}
{{end}}
